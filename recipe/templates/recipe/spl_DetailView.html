{% extends "recipe/base.html" %}

{% block content %}
  <h4 style="text-align:center"> Meal Plan:</h4>
  <p class="text-muted" style="text-align:center">Fancy some different meals?<a href="{% url 'shoppingList_update' object.pk %}">Update Meals</a></p>
  <ol style="text-align:center; list-style-position: inside">
  {% for recipe in object.meals.all %}
    <li><a href="{% url 'recipe_detail' recipe.title recipe.pk %}">{{ recipe.title }}</a></li>
  {% endfor %}
  </ol>
  <br>
  <br>
  <center>
    <h4>Email Shopping List</h4>
    <a href="{% url 'sendEmail' %}">Send Email</a>
  </center>
  <br>
  <br>
  <h4 style="text-align:center">Shopping List:</h4>
  <center>
    {% for f_type, ing_dict in ingredients.items %}
      <table>
        <caption style="caption-side: top; text-align: center;">{{f_type}}</caption>
        <tr>
          <th>Ingredients</th>
          <th>Qty</th>
        </tr>
        {% for ing, val in ing_dict.items %}
          <tr>
            <td>{{ ing }}</td>
            {% if val.units == None %}
              <td>{{ val.qty }}</td>
            {% else %}
              <td>{{ val.qty }}{{ val.units }}</td>
            {% endif %}
          </tr>
        {% endfor %}
      </table>
    {% endfor %}
      <br>
  </center>
{% endblock content %}